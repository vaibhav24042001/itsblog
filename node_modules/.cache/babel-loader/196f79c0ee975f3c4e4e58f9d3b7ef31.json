{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Lenovo\\\\Desktop\\\\firebase-blog-master\\\\src\\\\pages\\\\Blogs.js\",\n    _s = $RefreshSig$();\n\nimport { collection, endAt, endBefore, getDocs, limit, limitToLast, orderBy, query, startAfter } from \"firebase/firestore\";\nimport React from \"react\";\nimport { useEffect } from \"react\";\nimport { useState } from \"react\";\nimport BlogSection from \"../components/BlogSection\";\nimport Pagination from \"../components/Pagination\";\nimport Spinner from \"../components/Spinner\";\nimport { db } from \"../firebase\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst Blogs = _ref => {\n  _s();\n\n  let {\n    setActive\n  } = _ref;\n  const [loading, setLoading] = useState(false);\n  const [blogs, setBlogs] = useState([]);\n  const [currentPage, setCurrentPage] = useState(1);\n  const [lastVisible, setLastVisible] = useState(null);\n  const [noOfPages, setNoOfPages] = useState(null);\n  const [count, setCount] = useState(null);\n  useEffect(() => {\n    getBlogsData();\n    getTotalBlogs();\n    setActive(\"blogs\");\n  }, []);\n\n  if (loading) {\n    return /*#__PURE__*/_jsxDEV(Spinner, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 35,\n      columnNumber: 12\n    }, this);\n  }\n\n  const getBlogsData = async () => {\n    setLoading(true);\n    const blogRef = collection(db, \"blogs\");\n    const first = query(blogRef, orderBy(\"title\"), limit(4));\n    const docSnapshot = await getDocs(first);\n    setBlogs(docSnapshot.docs.map(doc => ({\n      id: doc.id,\n      ...doc.data()\n    })));\n    setCount(docSnapshot.size);\n    setLastVisible(docSnapshot.docs[docSnapshot.docs.length - 1]);\n    setLoading(false);\n  };\n\n  const getTotalBlogs = async () => {\n    const blogRef = collection(db, \"blogs\");\n    const docSnapshot = await getDocs(blogRef);\n    const totalBlogs = docSnapshot.size;\n    const totalPage = Math.ceil(totalBlogs / 4);\n    setNoOfPages(totalPage);\n  };\n\n  const fetchMore = async () => {\n    setLoading(true);\n    const blogRef = collection(db, \"blogs\");\n    const nextBlogsQuery = query(blogRef, orderBy(\"title\"), startAfter(lastVisible), limit(4));\n    const nextBlogsSnaphot = await getDocs(nextBlogsQuery);\n    setBlogs(nextBlogsSnaphot.docs.map(doc => ({\n      id: doc.id,\n      ...doc.data()\n    })));\n    setCount(nextBlogsSnaphot.size);\n    setLastVisible(nextBlogsSnaphot.docs[nextBlogsSnaphot.docs.length - 1]);\n    setLoading(false);\n  };\n\n  const fetchPrev = async () => {\n    setLoading(true);\n    const blogRef = collection(db, \"blogs\");\n    const end = noOfPages !== currentPage ? endAt(lastVisible) : endBefore(lastVisible);\n    const limitData = noOfPages !== currentPage ? limit(4) : count <= 4 && noOfPages % 2 === 0 ? limit(4) : limitToLast(4);\n    const prevBlogsQuery = query(blogRef, orderBy(\"title\"), end, limitData);\n    const prevBlogsSnaphot = await getDocs(prevBlogsQuery);\n    setBlogs(prevBlogsSnaphot.docs.map(doc => ({\n      id: doc.id,\n      ...doc.data()\n    })));\n    setCount(prevBlogsSnaphot.size);\n    setLastVisible(prevBlogsSnaphot.docs[prevBlogsSnaphot.docs.length - 1]);\n    setLoading(false);\n  };\n\n  const handlePageChange = value => {\n    if (value === \"Next\") {\n      setCurrentPage(page => page + 1);\n      fetchMore();\n    } else if (value === \"Prev\") {\n      setCurrentPage(page => page - 1);\n      fetchPrev();\n    }\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"container\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"row\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"blog-heading text-center py-2 mb-4\",\n          children: \"Daily Blogs\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 108,\n          columnNumber: 11\n        }, this), blogs === null || blogs === void 0 ? void 0 : blogs.map(blog => /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"col-md-6\",\n          children: /*#__PURE__*/_jsxDEV(BlogSection, { ...blog\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 111,\n            columnNumber: 15\n          }, this)\n        }, blog.id, false, {\n          fileName: _jsxFileName,\n          lineNumber: 110,\n          columnNumber: 13\n        }, this))]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 107,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Pagination, {\n        currentPage: currentPage,\n        noOfPages: noOfPages,\n        handlePageChange: handlePageChange\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 115,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 106,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 105,\n    columnNumber: 5\n  }, this);\n};\n\n_s(Blogs, \"acXC/0iXU/v71acLm+NlU8fppqY=\");\n\n_c = Blogs;\nexport default Blogs;\n\nvar _c;\n\n$RefreshReg$(_c, \"Blogs\");","map":{"version":3,"names":["collection","endAt","endBefore","getDocs","limit","limitToLast","orderBy","query","startAfter","React","useEffect","useState","BlogSection","Pagination","Spinner","db","Blogs","setActive","loading","setLoading","blogs","setBlogs","currentPage","setCurrentPage","lastVisible","setLastVisible","noOfPages","setNoOfPages","count","setCount","getBlogsData","getTotalBlogs","blogRef","first","docSnapshot","docs","map","doc","id","data","size","length","totalBlogs","totalPage","Math","ceil","fetchMore","nextBlogsQuery","nextBlogsSnaphot","fetchPrev","end","limitData","prevBlogsQuery","prevBlogsSnaphot","handlePageChange","value","page","blog"],"sources":["C:/Users/Lenovo/Desktop/firebase-blog-master/src/pages/Blogs.js"],"sourcesContent":["import {\n  collection,\n  endAt,\n  endBefore,\n  getDocs,\n  limit,\n  limitToLast,\n  orderBy,\n  query,\n  startAfter,\n} from \"firebase/firestore\";\nimport React from \"react\";\nimport { useEffect } from \"react\";\nimport { useState } from \"react\";\nimport BlogSection from \"../components/BlogSection\";\nimport Pagination from \"../components/Pagination\";\nimport Spinner from \"../components/Spinner\";\nimport { db } from \"../firebase\";\n\nconst Blogs = ({setActive}) => {\n  const [loading, setLoading] = useState(false);\n  const [blogs, setBlogs] = useState([]);\n  const [currentPage, setCurrentPage] = useState(1);\n  const [lastVisible, setLastVisible] = useState(null);\n  const [noOfPages, setNoOfPages] = useState(null);\n  const [count, setCount] = useState(null);\n\n  useEffect(() => {\n    getBlogsData();\n    getTotalBlogs();\n    setActive(\"blogs\");\n  }, []);\n\n  if (loading) {\n    return <Spinner />;\n  }\n\n  const getBlogsData = async () => {\n    setLoading(true);\n    const blogRef = collection(db, \"blogs\");\n    const first = query(blogRef, orderBy(\"title\"), limit(4));\n    const docSnapshot = await getDocs(first);\n    setBlogs(docSnapshot.docs.map((doc) => ({ id: doc.id, ...doc.data() })));\n    setCount(docSnapshot.size);\n    setLastVisible(docSnapshot.docs[docSnapshot.docs.length - 1]);\n    setLoading(false);\n  };\n\n  const getTotalBlogs = async () => {\n    const blogRef = collection(db, \"blogs\");\n    const docSnapshot = await getDocs(blogRef);\n    const totalBlogs = docSnapshot.size;\n    const totalPage = Math.ceil(totalBlogs / 4);\n    setNoOfPages(totalPage);\n  };\n\n  const fetchMore = async () => {\n    setLoading(true);\n    const blogRef = collection(db, \"blogs\");\n    const nextBlogsQuery = query(\n      blogRef,\n      orderBy(\"title\"),\n      startAfter(lastVisible),\n      limit(4)\n    );\n    const nextBlogsSnaphot = await getDocs(nextBlogsQuery);\n    setBlogs(\n      nextBlogsSnaphot.docs.map((doc) => ({ id: doc.id, ...doc.data() }))\n    );\n    setCount(nextBlogsSnaphot.size);\n    setLastVisible(nextBlogsSnaphot.docs[nextBlogsSnaphot.docs.length - 1]);\n    setLoading(false);\n  };\n  const fetchPrev = async () => {\n    setLoading(true);\n    const blogRef = collection(db, \"blogs\");\n    const end =\n      noOfPages !== currentPage ? endAt(lastVisible) : endBefore(lastVisible);\n    const limitData =\n      noOfPages !== currentPage\n        ? limit(4)\n        : count <= 4 && noOfPages % 2 === 0\n        ? limit(4)\n        : limitToLast(4);\n    const prevBlogsQuery = query(blogRef, orderBy(\"title\"), end, limitData);\n    const prevBlogsSnaphot = await getDocs(prevBlogsQuery);\n    setBlogs(\n      prevBlogsSnaphot.docs.map((doc) => ({ id: doc.id, ...doc.data() }))\n    );\n    setCount(prevBlogsSnaphot.size);\n    setLastVisible(prevBlogsSnaphot.docs[prevBlogsSnaphot.docs.length - 1]);\n    setLoading(false);\n  };\n\n  const handlePageChange = (value) => {\n    if (value === \"Next\") {\n      setCurrentPage((page) => page + 1);\n      fetchMore();\n    } else if (value === \"Prev\") {\n      setCurrentPage((page) => page - 1);\n      fetchPrev();\n    }\n  };\n  return (\n    <div>\n      <div className=\"container\">\n        <div className=\"row\">\n          <div className=\"blog-heading text-center py-2 mb-4\">Daily Blogs</div>\n          {blogs?.map((blog) => (\n            <div className=\"col-md-6\" key={blog.id}>\n              <BlogSection {...blog} />\n            </div>\n          ))}\n        </div>\n        <Pagination\n          currentPage={currentPage}\n          noOfPages={noOfPages}\n          handlePageChange={handlePageChange}\n        />\n      </div>\n    </div>\n  );\n};\n\nexport default Blogs;\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}